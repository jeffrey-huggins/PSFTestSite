$(document).ready(function(){var n=$("#ASAPs").dataTable({bAutoWidth:!1,sScrollY:"200px",sDom:"rt",iDisplayLength:-1,aoColumns:[null,null,{sWidth:"250px"},{visible:!1},{visible:!1},{visible:!1},{visible:!1},{visible:!1},{visible:!1},{bSortable:!1,sWidth:"40px"},{bSortable:!1,sWidth:"40px"}],language:{emptyTable:"No records within this range."}}),t,i;n.fnSort([[0,"desc"]]);$("#ASAPs a.edit").on("click",function(t){t.preventDefault();var u=$(this).parents("tr")[0],r=$(this).closest("tr").attr("id"),i=n.fnGetData(u);$("#Date").val(i[1]);$("#NumberId").val(r);$("#ComplaintTypes").val(i[4]);$("#CallerName").val(i[2]);$("#CallerNumber").val(i[3]);$("#Complaint").val(i[5]);$("#Investigation").val(i[6]);$("#Action").val(i[7]);$("#Summary").val(i[8]);$("#EditingId").val(r);$.ajax({url:path+"ASAPHotline/GetASAPCallDocuments",type:"POST",dataType:"json",data:{asapCallId:r},success:function(n){var t=$("#file-link-template"),r=$(".file-selection"),i=$("#asap-documents-section");i.find(".file-link").each(function(n,t){t.outerHTML=""});$(n).each(function(n,i){var r=$(t[0].outerHTML),u;r.removeClass("hidden");r.prop("id","file-link-"+i.ASAPCallDocumentId);u=r.find("a");u.prop("href",path+"ASAPHotline/"+t.find("a").data("action")+"/"+i.ASAPCallDocumentId);u[0].innerHTML=i.DocumentFileName;r.find("#ASAPCallDocumentId").val(i.ASAPCallDocumentId);$(".file-selection").first().before(r)})},error:function(n,t,i){alert(i)}})});$("#ASAPs a.delete").on("click",function(t){if(t.preventDefault(),confirm("Are you sure you want to delete?")){var r=$(this).parents("tr")[0],i=$(this).closest("tr").attr("id");$.ajax({url:path+"ASAPHotline/DeleteRow",dataType:"json",cache:!1,type:"POST",data:{rowId:i},success:function(t){t.Success?(n.fnDeleteRow(r),$("#EditingId").val()==i&&$("#clearASAP").click()):alert("Error: Event not found in database")},error:function(){alert("Server is not responding. Please reload page and try again")}})}});$("#asap-documents-section").on("click",".file-link .delete-item",function(n){var t=$(n.target).parents(".file-link");t.addClass("hidden delete-flagged")});t=$("#Contacts").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"100px",sDom:"frtS",iDisplayLength:-1,aoColumns:[null,{bSortable:!1}],oLanguage:{sEmptyTable:"No contacts listed"}});t.fnSort([[0,"desc"]]);$("#Contacts #ContactCheckBox").click(function(){var n=$(this).closest("tr").attr("id"),t=$(this).is(":checked");$.post(path+"ASAPHotline/EmailContact",{rowId:n,check:t})});$(function(){$("#occurredRangeTo").datepicker({beforeShow:function(n,t){t.dpDiv.css({marginTop:"0px",marginLeft:"0px"})}});$("#occurredRangeFrom").datepicker({beforeShow:function(n,t){t.dpDiv.css({marginTop:"0px",marginLeft:"0px"})}});$(".isDate").datepicker({beforeShow:function(n,t){t.dpDiv.css({marginTop:-n.offsetHeight+"px",marginLeft:n.offsetWidth+"px"})}})});i=$("#SaveASAP").validate({rules:{Date:{required:!0,date:!0},ComplaintTypes:{required:!0},CallerName:{required:!0},CallerNumber:{required:!0},Complaint:{required:!0}}});$(function(){$("#ToDateRangeInvalid").val()=="1"&&alert('Error: Please enter a valid date in the Infection Date Range "To" Field (mm/dd/yyyy)');$("#FromDateRangeInvalid").val()=="1"&&alert('Error: Please enter a valid date in the Infection Date Range "From" Field (mm/dd/yyyy)');$("#ToDateRangeInFuture").val()=="1"&&alert('Error: Please enter a valid date that is not in the future in the Infection Date Range "To" Field');$("#FromDateRangeInFuture").val()=="1"&&alert('Error: Please enter a valid date that is not in the future in the Infection Date Range "From" Field');$("#FromAfterTo").val()=="1"&&alert('Error: You can not have the "From" Date after the "To" Date in the Infection Date Range Fields')});$("#submitASAP").click(function(){$("#SaveASAP").valid()&&(setTimeout(function(){$("#asap-documents-section .file-link.delete-flagged").each(function(n,t){var i=$(t);$.ajax({url:path+"ASAPHotline/DeleteASAPCallDocument",type:"POST",dataType:"json",data:{documentId:i.find("#ASAPCallDocumentId").val()}})})},200),$("#SaveASAP").submit())});$("#clearASAP").click(function(){i.resetForm();$("#SaveASAP textarea").val("");$("#SaveASAP input").val("");$("#ComplaintTypes").val("");$("#Contacts input").prop("checked",!1);$("#asap-documents-section").find(".file-link").each(function(n,t){t.outerHTML=""});$.post("../ASAPHotline/ClearEmailContacts")})});