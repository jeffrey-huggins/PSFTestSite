function PopulateWoundNoteFromExisting(n,t){$.ajax({url:ajaxUri+"GetRowWound",dataType:"json",cache:!1,type:"POST",data:{rowId:t},success:function(i){n?($("#WoundEditingId").val(""),$("#DateNoted").val(""),$("#Stages").attr("disabled",null)):($("#WoundEditingId").val(t),$("#DateNoted").val(i.NotedDate),$("#Stages").attr("disabled","disabled"));$("#Stages").val(i.PressureWoundStageId);$("#Treatment").val(i.Treatment);$("#Measurements").val(i.Measurement);$("#ReliefDevice").val(i.ReliefDevice);$("#Status").val(i.Status);$("#LabsDiagnostic").val(i.LabDiagnostic);i.Drainage?($("#DrainageCheckBox").prop("checked",!0),$("#Drainage").removeClass("hidden"),$("#Drainage").val(i.DrainageDesc)):($("#DrainageCheckBox").prop("checked",!1),$("#Drainage").addClass("hidden"),$("#Drainage").val(""));$("#Intervention").val(i.Intervention);$("#Dietary").val(i.DietaryDate);$("#Physician").val(i.PhysicianDate);$("#Family").val(i.FamilyDate);$("#IdealBodyWeight").val(i.IdealBodyWeight);$("#ActualWeight").val(i.ActualWeight);$("#FoodIntake").val(i.FoodIntake);$("#SkinTurgor").val(i.SkinTurgor);$("#Urine").val(i.Urine);$("#PainLevel").val(i.PainLevel);$("#Progress").val(i.Progress);$("#Signature").val(i.Signature);$("#PWLength").val(i.LengthNbr);$("#PWWidth").val(i.WidthNbr);i.DepthFlg==!0?($("#PWDepth").val(i.DepthNbr),$(".depth-field").removeClass("hidden")):($("#PWDepth").val(null),$(".depth-field").addClass("hidden"));n&&!i.Measurement&&($("#PWDepth").val(""),$("#PWLength").val(""),$("#PWWidth").val(""),$("#Drainage").val(""),$("#LabsDiagnostic").val(""),$("#DrainageCheckBox").prop("checked",!1),$("#Drainage").addClass("hidden"),$("#Treatment").val(""));$(".show-note","#wound").click();SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload page and try again")}})}function SetupFallModalDataTable(n){return $(n).dataTable({bAutoWidth:!1,sScrollY:"150px",sDom:"rt",iDisplayLength:-1,aoColumns:[{bVisible:!1},null,{bSortable:!1}]})}function PopulateAntiNoteFromExisting(n,t,i){$.ajax({url:ajaxUri+"GetRowAnti",dataType:"json",cache:!1,type:"POST",data:{rowId:i},success:function(t){n?$("#AntiEditingId, #DateAntipsychotic").val(""):($("#AntiEditingId").val(i),$("#DateAntipsychotic").val(t.NotedDate));$("#ReducedAnti").prop("checked",t.ReducedFlg);$("#DateReducedAnti").val(t.ReducedDate);$("#ReviewedAnti").prop("checked",t.ReviewedFlg);$("#QrtrlyAssessment").prop("checked",t.QrtrlyAssessmentFlg);$("#Recommendation").val(t.RecommendationDesc);t.ReducedFlg?$("#DateReducedAnti").removeClass("hidden"):$("#DateReducedAnti").addClass("hidden");$("#SOCMeasure").val()==11&&($("#DateAIMS").val(t.LastAimsTestDate),$("#TargetedBehavior").val(t.TargetedBehaviors),$("#DateOccurredLabel").prop("textContent","Date Initial Order:"),$("#ReducedLabel").prop("textContent","GDR:"),$("#ReviewedLabel").prop("textContent","IDT Reviewed:"),$("#ReviewedAnti").addClass("hidden"),$("#reducedShow").removeClass("hidden"),$("#ReducedAnti").addClass("hidden"),$("#DateReducedAnti").removeClass("hidden"),$(".with-diagnosis-only").removeClass("hidden"));$(".show-note","#antipsychotic").click();SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload page and try again")}})}function PopulateRestraintNoteFromExisting(n,t){$.ajax({url:ajaxUri+"GetRowRestraint",dataType:"json",cache:!1,type:"POST",data:{rowId:t},success:function(i){n?($("#RestraintEditingId").val(""),$("#DateReduced").val("")):($("#RestraintEditingId").val(t),$("#DateReduced").val(i.ReducedDate));$("#RestraintTypes").val(i.SOCRestraintId);i.DiagnosisSupportsRestraintFlg?($("#DiagnosisRestraint").prop("checked",!0),$("#DiagnosisRestraintDesc").removeClass("hidden"),$("#DiagnosisRestraintDesc").val(i.DiagnosisSupportsRestraintDesc)):($("#DiagnosisRestraint").prop("checked",!1),$("#DiagnosisRestraintDesc").addClass("hidden"),$("#DiagnosisRestraintDesc").val(""));$("#RestraintComments").val(i.Comments);$(".show-note","#restraint").click();SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload page and try again")}})}function DeleteNote(n,t,i,r,u){var s=n.fnSettings().fnRecordsDisplay(),e,o,f;if(s==1){alert("Cannot delete this row. One Noted Record must remain for each Standards of Care entry.");return}e=confirm("Are you sure you want to delete?");e==!0&&(o=$(u).parents("tr")[0],f=$(u).closest("tr").attr("id"),$.ajax({url:t,dataType:"json",cache:!1,type:"POST",data:{rowId:f},success:function(t){t.Success?(n.fnDeleteRow(o),$(i).val()==f&&$(r).click()):alert("Error: Event not found in database");SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload page and try again")}}))}function InputMeasure(n,t){var r=$("<div />"),i,u,f;r.addClass("modal");$("body").append(r);i=$(t);$("#SubAppCode").val(n);$(".date-occurred-container",i).append($("#DateOccurred"));$(".date-resolved-container",i).append($("#DateResolved"));i.show();u=Math.max($(window).height()/2-i[0].offsetHeight/2,0);f=Math.max($(window).width()/2-i[0].offsetWidth/2,0);i.css({top:u,left:f})}function UpdateTableWithSaved(n,t){var r=[t.SOCMeasureName,t.OccurredDate,t.OtherInformation,t.ResolvedDate,'<a class="edit" href="">Edit<\/a>','<a class="delete" href="">Delete<\/a>'],u=$("#EditingId").val(),i,f,e,o;u!=""?(i=document.getElementById(u),i!=null&&(f=n.fnGetPosition(i),n.fnUpdate(r,f),i.setAttribute("id",t.SOCEventId))):(e=n.fnAddData(r),o=n.fnSettings().aoData[e[0]].nTr,o.setAttribute("id",t.SOCEventId));$("#EditingId").val(t.SOCEventId)}function SaveMeasure(n,t,i,r,u){n.prepend($("#MeasureId"));n.prepend($("#SubAppCode"));n.prepend($("#EditingId"));$.ajax({url:t,dataType:"json",cache:!1,type:"POST",data:n.serialize(),success:function(n){if(!n.Success){u&&u(n);SetCountDownTime(1800);return}UpdateTableWithSaved(i,n);r&&r(n);SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload the page and try again")}})}function MeasureFormIsValid(){return!DateOccurredIsValid()||!DateResolvedIsValid()?!1:!0}function GetSelectedStageData(){var i=$("#Stages").find("option:selected").val(),n,t;for($("#SelectedStage").val(i),n=0;n<myStages.length;n++)if(t=myStages[n],t.PressureWoundStageId==i)return t}function ValidateWoundMeasurement(n,t){var i=n.val();return isNaN(i)?(alert(t+" must be a number."),!1):i<0?(alert(t+" cannot be below 0.0"),n.val(0),!1):i>99.9?(alert(t+" cannot be above 99.9"),n.val(99.9),!1):!0}function WoundFormIsValid(){var u,f,e,r,o,n,t,i;if(!DateOccurredIsValid()||!DateResolvedIsValid())return!1;if(u=" is a required field.",f=" must be in the format mm/dd/yyyy.",$("#SOCEventWound_UnavoidableFlg").is(":checked")==!0)if($("#wound-document")[0]==undefined){if($(".file-link")[0]==undefined)return!1}else if($("#wound-document").val().length==0)return alert("If the wound is Unavoidable, please attach document."),!1;if($(".IncludeNote","#wound").val()==="true"){if(e=$("#DateNoted").val(),e=="")return alert("Date Noted"+u),!1;if(isInvalidDate(e))return alert("Date Noted"+f),!1;if(IsDateFuture(e))return alert("Date Noted cannot be in the future."),!1;for(n=0;n<GeneralBoxesToValidate.length;n++)if(t=$("#"+GeneralBoxesToValidate[n][0]),t.removeClass("input-validation-error"),i=$("#"+GeneralBoxesToValidate[n][0]).val(),i==""&&!t.hasClass("hidden"))return t.addClass("input-validation-error"),alert(GeneralBoxesToValidate[n][1]+u),!1;if($("#SubAppCode").val()=="PRWNDPRIOR"||$("#SubAppCode").val()=="PRWNDAFTER"){for(n=0;n<PressureBoxesToValidate.length;n++)if(t=$("#"+PressureBoxesToValidate[n][0]),t.removeClass("input-validation-error"),i=$("#"+PressureBoxesToValidate[n][0]).val(),i=="")return t.addClass("input-validation-error"),alert(PressureBoxesToValidate[n][1]+u),!1;if((r=GetSelectedStageData(),r.LengthFlg==!0&&!ValidateWoundMeasurement($("#PWLength"),"Length"))||r.WidthFlg==!0&&!ValidateWoundMeasurement($("#PWWidth"),"Width")||r.DepthFlg==!0&&!ValidateWoundMeasurement($("#PWDepth"),"Depth"))return!1;if(r.SeverityLevelNbr!=null&&(o=$("#WoundHighestSeverityLevel").val(),r.SeverityLevelNbr<o))return alert("Stage cannot decrease in severity."),!1;if(isInvalidDate($("#Dietary").val()))return alert("Dietary"+f),!1;if(isInvalidDate($("#Physician").val()))return alert("Physician"+f),!1;if(isInvalidDate($("#Family").val()))return alert("Family"+f),!1}else for(n=0;n<CompositeBoxesToValidate.length;n++)if(t=$("#"+CompositeBoxesToValidate[n][0]),t.removeClass("input-validation-error"),i=$("#"+CompositeBoxesToValidate[n][0]).val(),i=="")return t.addClass("input-validation-error"),alert(CompositeBoxesToValidate[n][1]+u),!1}return!0}function FallFormIsValid(){if(!DateOccurredIsValid())return!1;if(!ValidateHr($("#Hr").val()))return alert("Hr must be a number between 1 and 12"),!1;if(!ValidateMin($("#Min").val()))return alert("Min must be a number between 0 and 59"),!1;if($("#FallLocations").val()=="")return alert("A Fall Location must be selected."),!1;var n=!0,t=$("#InterventionTable input:checked").length==0,i=$("#typeOfFall input:checked").length==0,r=$("#typeOfInjury input:checked").length==0,u=$("#TreatmentTable input:checked").length==0;return(t||i||r||u)&&(alert("All tables are required. Please select at least 1 from each."),n=!1),n}function AntiPsychoticFormIsValid(){var n,t;if(!DateOccurredIsValid()||!DateResolvedIsValid())return!1;if($("#SOCEventAntiPsychotic_AntiPsychoticDiagnosisId option:selected").val()=="")return alert("Diagnosis is a required field."),!1;if($("#SOCEventAntiPsychotic_AntiPsychoticMedicationId option:selected").val()=="")return alert("Antipsychotic is a required field."),!1;if($(".IncludeNote","#antipsychotic").val()==="true"){if($("#SOCEventAntiPsychotic_Diagnosis").val()=="")return alert("Diagnosis is a required field."),!1;if(n=$("#DateAntipsychotic").val(),n=="")return alert("Date is a required field."),!1;if(isInvalidDate(n))return alert("Date must be in the format mm/dd/yyyy."),!1;if(t=$("#ReducedAnti").is(":checked"),n=$("#DateReducedAnti").val(),t&&n=="")return alert("Date Reduced is a required field."),!1;if(t&&isInvalidDate(n))return alert("Date Reduced must be in the format mm/dd/yyyy."),!1;if($("#Recommendation").val()=="")return alert("Recommendation is a required field."),!1}return!0}function CatheterFormIsValid(){return!DateOccurredIsValid()||!DateResolvedIsValid()?!1:$("#SOCEventCatheter_SOCCatheterTypeId").val()==""?(alert("Catheter Type is a required field."),!1):!0}function RestraintFormIsValid(){if(!DateOccurredIsValid()||!DateResolvedIsValid())return!1;if($(".IncludeNote","#restraint").val()==="true"){if($("#RestraintTypes").val()=="")return alert("Restraint Type is a required field."),!1;var n=$("#DateReduced").val();if(isInvalidDate(n))return alert("Reduced Date must be in the format mm/dd/yyyy."),!1}return!0}function DateOccurredIsValid(){var n=$("#DateOccurred").val();return n==""?(alert("Occurred date is a required field."),!1):isInvalidDate(n)?(alert("Occurred date must be in the format mm/dd/yyyy."),!1):IsDateFuture(n)?(alert("Occurred date cannot be in the future."),!1):!0}function DateResolvedIsValid(){var n=$("#DateResolved").val();return isInvalidDate(n)?(alert("Resolved date must be in the format mm/dd/yyyy."),!1):IsDateFuture(n)?(alert("Resolved date cannot be in the future."),!1):new Date($("#DateOccurred").val())>new Date(n)?(alert("Resolved Date cannot occur before the Date Occurred."),!1):!0}function isInvalidDate(n){return n!=""&&!ValidateDate(n)}function InputEvent(){var t=$("#woundsTable").dataTable(),i=$("#restTable").dataTable(),r=$("#antiTable").dataTable(),n=$("#MeasureId");n.val()==1?($(".injury").show(),InputMeasure("FALL","#fall")):n.val()==3||n.val()==9||n.val()==10?InputMeasure(null,"#event"):n.val()==4?($(".pressure").show(),$(".pressureAfter").hide(),$(".composite").hide(),InputMeasure("PRWNDPRIOR","#wound"),$("#SOCEventWound_AffectedByOther").is(":checked")?$("#OtherDescriptionRow").show():$("#OtherDescriptionRow").hide(),t.fnAdjustColumnSizing()):n.val()==5?($(".pressure").show(),$(".pressureAfter").show(),$(".composite").hide(),$("#SOCEventWound_AffectedByOther").is(":checked")?$("#OtherDescriptionRow").show():$("#OtherDescriptionRow").hide(),InputMeasure("PRWNDAFTER","#wound"),t.fnAdjustColumnSizing()):n.val()==6?(InputMeasure("RESTRAINT","#restraint"),i.fnAdjustColumnSizing()):n.val()==24?($(".pressure").hide(),$(".pressureAfter").hide(),$(".composite").show(),InputMeasure("SCWND","#wound"),t.fnAdjustColumnSizing()):n.val()==7?InputMeasure("","#event"):n.val()==8?InputMeasure("CATHETER","#catheter"):(n.val()==11||n.val()==23)&&(InputMeasure("ANTIPSYCH","#antipsychotic"),UpdateAntiLabels(n.val()),$("#SOCEventAntiPsychotic_AntiPsychoticMedicationId").val($("#antiMedicationId").val()),$("#SOCEventAntiPsychotic_AntiPsychoticDiagnosisId").val($("#antiDiagnosisId").val()),AntiPsychoticDiagnosisCheck(),r.fnAdjustColumnSizing())}function UpdateAntiLabels(n){n==11?($("#DateOccurredLabel").prop("textContent","Date Initial Order:"),$("#ReducedLabel").prop("textContent","GDR:"),$("#ReviewedLabel").prop("textContent","IDT Reviewed:"),$("#ReviewedAnti").addClass("hidden"),$("#reducedShow").removeClass("hidden"),$("#ReducedAnti").addClass("hidden"),$("#DateReducedAnti").removeClass("hidden"),$(".with-diagnosis-only").removeClass("hidden")):($("#DateOccurredLabel").prop("textContent","Date Occurred:"),$("#ReviewedLabel").prop("textContent","Reviewed:"),$("#ReducedLabel").prop("textContent","Reduced:"),$(".with-diagnosis-only").addClass("hidden"),$("#ReviewedAnti").removeClass("hidden"),$("#reducedShow").addClass("hidden"),$("#ReducedAnti").removeClass("hidden"),$("#DateReducedAnti").addClass("hidden"))}function AntiPsychoticDiagnosisCheck(){$("#SOCEventAntiPsychotic_AntiPsychoticDiagnosisId option:selected").text().toLowerCase()=="other"?$("#SOCEventAntiPsychotic_OtherDiagnosisDetail").removeClass("hidden"):($("#SOCEventAntiPsychotic_OtherDiagnosisDetail").addClass("hidden"),$("#SOCEventAntiPsychotic_OtherDiagnosisDetail").val(""))}function setWoundDocumentState(){var n=$("#SOCEventWound_UnavoidableFlg").is(":checked");n?($("#wound-document").attr("disabled",null),$(".file-link").removeClass("hidden")):($("#wound-document").attr("disabled","disabled"),$("#wound-document").val(""),$(".file-link").addClass("hidden"))}var ajaxUri,myStages;ajaxUri=document.location.pathname.charAt(document.location.pathname.length-1)!="/"?document.location.pathname+"/":document.location.pathname;var GeneralBoxesToValidate=[["SOCEventWound_Site","Site"],["Treatment","Treatment"],["Drainage","Drainage"],["Intervention","Intervention"]],PressureBoxesToValidate=[["Stages","Stage"],["ReliefDevice","Relief Device"],["Status","Status"],["PWLength","Length"],["PWWidth","Width"]],CompositeBoxesToValidate=[["SOCEventWound_CompositeWoundDescribeId","Wound Description"],["Measurements","Measurements"]];myStages=JSON.parse($("#stagesData").val());$(document).ready(function(){var n,t,c,f,e,o,s,h,r,i,u;n=document.location.pathname.charAt(document.location.pathname.length-1)!="/"?document.location.pathname+"/":document.location.pathname;t=$("#window-table").dataTable({bFilter:!1,bAutoWidth:!1,sDom:"frtS",iDisplayLength:-1,aoColumns:[{sWidth:"100px"},{sWidth:"40px"},{sWidth:"60px"},{sWidth:"50px"},{bSearchable:!1,bSortable:!1,sWidth:"40px"},{bSearchable:!1,bSortable:!1,sWidth:"50px"}],oLanguage:{sEmptyTable:"No entries for date range selected"}});c=null;t.fnSort([[1,"desc"]]);$("#window-table_length").css("display","none");$("#window-table").on("click","a.edit",function(t){t.preventDefault();ShowProgress();var i=$(this).closest("tr").attr("id");$.post(n+"ChangeCurrentSOCEvent",{rowId:i}).done(function(){window.location.reload()})});$("#window-table").on("click","a.delete",function(i){var r,u,f;i.preventDefault();r=confirm("Are you sure you want to delete?");r==!0&&(u=$(this).parents("tr")[0],f=$(this).closest("tr").attr("id"),$.ajax({url:n+"DeleteRow",dataType:"json",cache:!1,type:"POST",data:{rowId:f},success:function(n){n.Success?(t.fnDeleteRow(u),SetCountDownTime(1800)):alert("Error: Event not found in database")},error:function(){alert("Server is not responding. Please reload page and try again")}}))});$(".show-note").click(function(n){n.preventDefault();var t=$(this),i=t.parent(),r=$(".note",i);t.hide();r.show();$(".IncludeNote",i).val("true")});$(".dismiss-note").click(function(n){n.preventDefault();var t=$(this).closest(".note"),i=t.parent(),r=$(".show-note",i);t.hide();r.show();$(".IncludeNote",i).val("false")});f=$("#woundsTable").dataTable({bFilter:!1,bAutoWidth:!1,sDom:"frtS",iDisplayLength:-1,aoColumns:[null,null,null,{bSearchable:!1,bSortable:!1},{bSearchable:!1,bSortable:!1},{bSearchable:!1,bSortable:!1}],oLanguage:{sEmptyTable:"No wound notes recorded"}});f.fnSort([[0,"desc"]]);$("#woundsTable").on("click","a.edit",function(n){n.preventDefault();PopulateWoundNoteFromExisting(!1,$(this).closest("tr").attr("id"))});$("#woundsTable").on("click","a.copy",function(n){n.preventDefault();PopulateWoundNoteFromExisting(!0,$(this).closest("tr").attr("id"))});$("#woundsTable").on("click","a.delete",function(t){var i=$("#woundsTable").dataTable();t.preventDefault();DeleteNote(i,n+"DeleteRowWound","#WoundEditingId","#clearWound",this)});e=SetupFallModalDataTable("#InterventionTable");e.fnSort([[0,"asc"]]);o=SetupFallModalDataTable("#typeOfFall");o.fnSort([[0,"asc"]]);s=SetupFallModalDataTable("#typeOfInjury");s.fnSort([[0,"asc"]]);h=SetupFallModalDataTable("#TreatmentTable");h.fnSort([[0,"asc"]]);$(".checkbox").click(function(){var t=$(this),r=t.is(":checked"),i=t.closest("table").attr("id"),f=t.parents("tr")[0],u=t.closest("tr").attr("id");alert("CHECKBOX");$.ajax({url:n+"CheckBoxSelected",dataType:"json",cache:!1,type:"POST",data:{rowId:u,table:i,flag:r},success:function(n){n.Success||n.Reason!=0||(t.attr("checked",!1),i!="Diagnoses"?alert("Error: Can only have "+n.NumberOfSelections+" "+i.substring(0,i.length-1)+"(s) selected."):alert("Error: Can only have "+n.NumberOfSelections+" Diagnosis selected."));SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload page and try again")}})});r=$("#antiTable").dataTable({bFilter:!1,bAutoWidth:!1,sDom:"frtS",iDisplayLength:-1,aoColumns:[null,null,{bSearchable:!1,bSortable:!1},{bSearchable:!1,bSortable:!1},{bSearchable:!1,bSortable:!1}],oLanguage:{sEmptyTable:"No antipsychotic dates recorded"}});r.fnSort([[0,"desc"]]);$("#antiTable").on("click","a.edit",function(n){n.preventDefault();PopulateAntiNoteFromExisting(!1,$(this).parents("tr")[0],$(this).closest("tr").attr("id"))});$("#antiTable").on("click","a.copy",function(n){n.preventDefault();PopulateAntiNoteFromExisting(!0,$(this).parents("tr")[0],$(this).closest("tr").attr("id"))});$("#antiTable").on("click","a.delete",function(t){t.preventDefault();DeleteNote(r,n+"DeleteRowAnti","#AntiEditingId","#clearAnti",this)});$("#antipsychotic").on("change","#SOCEventAntiPsychotic_AntiPsychoticDiagnosisId",function(){AntiPsychoticDiagnosisCheck()});i=$("#restTable").dataTable({bFilter:!1,sDom:"frtS",iDisplayLength:-1,aoColumns:[null,null,null,{sWidth:"5px",bSearchable:!1,bSortable:!1},{sWidth:"5px",bSearchable:!1,bSortable:!1},{sWidth:"5px",bSearchable:!1,bSortable:!1}],oLanguage:{sEmptyTable:"No restraint notes recorded"}});i.fnSort([[1,"desc"]]);$("#restTable").on("click","a.edit",function(n){n.preventDefault();PopulateRestraintNoteFromExisting(!1,$(this).closest("tr").attr("id"))});$("#restTable").on("click","a.copy",function(n){n.preventDefault();PopulateRestraintNoteFromExisting(!0,$(this).closest("tr").attr("id"))});$("#restTable").on("click","a.delete",function(t){t.preventDefault();DeleteNote(i,n+"DeleteRowRestraint","#RestraintEditingId","#clearRest",this)});$(function(){$("#DateOccurred, #DateResolved").datepicker({beforeShow:function(n,t){t.dpDiv.css({marginTop:-n.offsetHeight+"px",marginLeft:n.offsetWidth+"px"})}});$("#occurredRangeTo, #occurredRangeFrom, .isDate").datepicker({beforeShow:function(n,t){t.dpDiv.css({marginTop:"0px",marginLeft:"0px"})}})});$(function(){$("#ToDateRangeInvalid").val()=="1"&&alert('Error: Please enter a valid date in the Occurred Date Range "To" Field (mm/dd/yyyy)');$("#FromDateRangeInvalid").val()=="1"&&alert('Error: Please enter a valid date in the Occurred Date Range "From" Field (mm/dd/yyyy)');$("#ToDateRangeInFuture").val()=="1"&&alert('Error: Please enter a valid date that is not in the future in the Occurred Date Range "To" Field');$("#FromDateRangeInFuture").val()=="1"&&alert('Error: Please enter a valid date that is not in the future in the Occurred Date Range "From" Field');$("#FromAfterTo").val()=="1"&&alert('Error: You can not have the "From" Date after the "To" Date in the Occurred Date Range Fields')});$("#SOCMeasure").change(function(){var n=$("#SOCMeasure :selected").val();$("#MeasureId").val(n)});$("#saveMeasure").click(function(){var i=$("#SaveEvent");i.valid()&&MeasureFormIsValid()&&SaveMeasure(i,n+"SaveMeasure",t,function(){alert("Record has been successfully saved.");$("#closeMeasure").click()})});$("#closeMeasure").click(function(){$(".modal, #event").hide()});$("#createSOC").click(function(){var n=$("#antiTable").dataTable(),t=$("#woundsTable").dataTable();$("#EditingId, #DateOccurred, #DateResolved").val("");t.fnClearTable();$("#SOCEventWound_Site, #SOCEventWound_CompositeWoundDescribeId, #SOCEventCatheter_SOCCatheterTypeId, #SOCEventAntiPsychotic_AntiPsychoticMedicationId, #OtherDescriptionRow, #SOCEventWound_AdmittedWithFlg, #admitted").attr("disabled",null).val("");$("#SOCEventWound_UnavoidableFlg, #SOCEventWound_AffectedByOther, #AdmittedWithFlg").prop("checked",!1);$("#SOCEventWound_AffectedByDiabetes, #SOCEventWound_AffectedByIncontinence, #SOCEventWound_AffectedByParalysis, #SOCEventWound_AffectedBySepsis, #SOCEventWound_AffectedByEndStageDisease").prop("checked",!1);$("#AdmittedWithFlg").attr("disabled",null);$("#WoundHighestSeverityLevel").val("");$("#clearWound").click();$("#clearFall").click();i.fnClearTable();$("#DateAntipsychotic, #Recommendation, #SOCEventAntiPsychotic_Diagnosis, #ConsentDateAnti").val("");$("#SOCEventAntiPsychotic_Diagnosis").attr("readonly",null);$("#SOCEventAntiPsychotic_Diagnosis").css("background-color","");n.fnClearTable();$(".dismiss-note, .show-note").hide();$(".note").show();$(".IncludeNote").val("true");InputEvent()});$("#saveWound").click(function(){var n=$("#SaveWound");n.valid()&&WoundFormIsValid()&&(n.prepend($("#MeasureId")),n.prepend($("#SubAppCode")),n.prepend($("#EditingId")),ShowProgress(),n.ajaxSubmit({success:function(n){try{n.indexOf("<pre>")==0&&(n=n.substring(5,n.length-6));var t=$.parseJSON(n);t.Success?window.location.replace(path+"StandardsOfCare/"):t.Reason==0&&(alert("A note for this day already exists.  Edit the currently existing note."),window.location.replace(path+"StandardsOfCare/"))}catch(i){window.location.replace(path+"StandardsOfCare/")}},error:function(){window.location.replace(path+"StandardsOfCare/");alert("Failure communicating with the server.")}}))});$("#SOCEventWound_AffectedByOther").change(function(){var n=$(this).is(":checked");n?$("#OtherDescriptionRow").show():$("#OtherDescriptionRow").hide()});$("#DrainageCheckBox").click(function(){var n=$(this).is(":checked");n?$("#Drainage").removeClass("hidden"):$("#Drainage").addClass("hidden")});$("#AdmittedWithFlg").click(function(){var n=$(this).is(":checked");$("#SOCEventWound_AdmittedWithFlg").val(n)});$("#SaveWound").on("click",".file-link .delete-item",function(){if(confirm("Are you sure you would like to delete '"+$(this).siblings("a").text().trim()+"'?")){var t=$(this).data("document-id");$.ajax({url:n+"DeleteWoundDocument",type:"POST",dataType:"json",data:{documentId:t},success:function(){$(".file-link")[0].innerHTML='<input type="file" name="files" id="wound-document" class="fileSelection pressure" />'}})}});$("#SOCEventWound_UnavoidableFlg").click(function(){setWoundDocumentState()});setWoundDocumentState();$("#clearWound").click(function(){$("#WoundEditingId, #DateNoted, #Stages, #PWLength, #PWWidth, #PWDepth, #wound-document, #LabsDiagnostic").val("");$("#SOCEventWound_Site").attr("disabled")==null&&$("#SOCEventWound_Site").val("");$("#SaveWound textarea").each(function(){$(this).val("")});$("#DrainageCheckBox").prop("checked",!1);$("#Drainage").addClass("hidden");$(".file-link")[0].innerHTML='<input type="file" name="files" id="wound-document" class="fileSelection pressure" />';setWoundDocumentState();$("#AdmittedWithFlg").attr("disabled")==null&&($("#AdmittedWithFlg").prop("checked",!1),$("#SOCEventWound_AdmittedWithFlg").val("false"))});$("#closeWound").click(function(){$(".modal, #wound").hide()});$("#saveFall").click(function(){var i=$("#SaveFall");i.valid()&&FallFormIsValid()&&SaveMeasure(i,n+"SaveFall",t,function(){alert("Fall Record has been successfully saved.");$("#closeFall").click()})});$("#closeFall").click(function(){$(".modal, #fall").hide()});$("#clearFall").click(function(){$("#Hr, #Min, #FallLocations, #SOCEventFall_RootCause").val("");$("#SOCEventFallAMPM").val("AM");$("#SaveFall input").prop("checked",!1)});$("#saveAnti").click(function(){var i=$("#antiTable").dataTable(),r=$("#SaveAntipsychotic");r.valid()&&AntiPsychoticFormIsValid()&&SaveMeasure(r,n+"SaveAntipsychotic",t,function(n){var t,r,u,f;if(alert("AntiPsychotic Record has been successfully saved."),n.SOCEventAntiPsychoticNotedId!==0){if(t=[n.NotedDate,n.RecommendationDesc,'<a class="copy" href="">Copy<\/a>','<a class="edit" href="">Edit<\/a>','<a class="delete" href="">Delete<\/a>'],$("#AntiEditingId").val()!=""){r=i.fnGetPosition($("#antiTable tr#"+n.SOCEventAntiPsychoticNotedId)[0]);i.fnUpdate(t,r);return}u=i.fnAddData(t);f=i.fnSettings().aoData[u[0]].nTr;f.setAttribute("id",n.SOCEventAntiPsychoticNotedId)}$("#SOCEventAntiPsychotic_AntiPsychoticMedicationId").attr("disabled","disabled");$("#SOCEventAntiPsychotic_Diagnosis").attr("readOnly","true");$("#SOCEventAntiPsychotic_Diagnosis").css("background-color","lightgray");$("#clearAnti").click();$("#closeAnti").click()},function(n){n.Reason==0&&alert("Error: Cannot have two entries with the same Date Noted. Please change the date.");n.Reason==1&&alert("Error: Could not save to the database. Please try again.");n.Reason==2&&alert("Error: The Recommendation text content is too long and information would be truncated. Please make your text shorter.")})});$("#closeAnti").click(function(){$(".modal, #antipsychotic").hide()});$("#clearAnti").click(function(){$("#AntiEditingId, #DateAntipsychotic, #Recommendation, #TargetedBehavior, #DateAIMS").val("");$("#SOCEventAntiPsychotic_AntiPsychoticMedicationId").attr("disabled")==null&&$("#SOCEventAntiPsychotic_AntiPsychoticMedicationId").val("");$("#SOCMeasure").val()!=11&&($("#DateReducedAnti").val("").addClass("hidden"),$("#reducedShow").addClass("hidden"));$("#SaveAntipsychotic input").prop("checked",!1)});$("#ReducedAnti").click(function(){var n=$(this).is(":checked");n?$("#DateReducedAnti").removeClass("hidden"):$("#DateReducedAnti").addClass("hidden")});$("#ReviewedAnti").click(function(){var n=$(this).is(":checked");n?$(" #reducedShow").removeClass("hidden"):($("#reducedShow, #DateReducedAnti").addClass("hidden"),$("#ReducedAnti").prop("checked",!1),$("#DateReducedAnti").val(""))});$("#saveCath").click(function(){var i=$("#SaveCatheter");i.valid()&&CatheterFormIsValid()&&SaveMeasure(i,n+"SaveCatheter",t,function(){alert("Catheter Record has been successfully saved.");$("#SOCEventCatheter_SOCCatheterTypeId").attr("disabled","disabled");$("#closeCath").click()})});$("#closeCath").click(function(){$(".modal").hide();$("#catheter").hide()});$("#saveRest").click(function(){var r=$("#SaveRestraint"),i=$("#restTable").dataTable();r.valid()&&RestraintFormIsValid()&&SaveMeasure(r,n+"SaveRestraint",t,function(n){var t,r,u,f;if(alert("Restraint Record has been successfully saved."),n.SOCEventRestraintNotedId!==0){if(t=[n.Restraint,n.ReducedDate,n.SupportFlg,'<a class="copy" href="">Copy<\/a>','<a class="edit" href="">Edit<\/a>','<a class="delete" href="">Delete<\/a>'],$("#RestraintEditingId").val()!=""){r=i.fnGetPosition($("#restTable tr#"+n.SOCEventRestraintNotedId)[0]);i.fnUpdate(t,r);SetCountDownTime(1800);return}u=i.fnAddData(t);f=i.fnSettings().aoData[u[0]].nTr;f.setAttribute("id",n.SOCEventRestraintNotedId)}$("#clearRest").click();$("#closeRest").click()},function(n){n.Reason==0&&alert("Error: Cannot have two entries with the same Date Reduced. Please change the date.");n.Reason==1&&alert("Error: Could not save to the database. Please try again.");n.Reason==2&&alert("Error: One of the text area's content is too long and information would be truncated. Please make your text shorter.")})});$("#closeRest").click(function(){$(".modal, #restraint").hide()});$("#DiagnosisRestraint").click(function(){var n=$(this).is(":checked");n?$("#DiagnosisRestraintDesc").removeClass("hidden"):$("#DiagnosisRestraintDesc").addClass("hidden")});$("#clearRest").click(function(){$("#RestraintEditingId, #RestraintTypes, #DateReduced, #DateNotedRest, #RestraintComments").val("");$("#DiagnosisRestraint").prop("checked",!1);$("#DiagnosisRestraintDesc").val("").addClass("hidden")});$("#Residents").change(function(){var n=$("#Residents option:selected").val();n==""&&$("#SideDDL").submit()});u=JSON.parse($("#stagesData").val());$("#Stages").change(function(){var i=$(this).find("option:selected").val(),t,n;for($("#SelectedStage").val(i),t=0;t<u.length;t++)n=u[t],n.PressureWoundStageId==i&&(n.LengthFlg==!0?$(".length-field").removeClass("hidden"):($("#PWLength").val(null),$(".length-field").addClass("hidden")),n.WidthFlg==!0?$(".width-field").removeClass("hidden"):($("#PWWidth").val(null),$(".width-field").addClass("hidden")),n.DepthFlg==!0?$(".depth-field").removeClass("hidden"):($("#PWDepth").val(null),$(".depth-field").addClass("hidden")))});optional();$("#SOCMeasure").val()==null&&$("#SOCMeasure").val("")});