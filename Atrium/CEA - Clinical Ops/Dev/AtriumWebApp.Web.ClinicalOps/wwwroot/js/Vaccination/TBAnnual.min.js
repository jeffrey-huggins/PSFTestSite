function toggleField(n,t,i){$(n).is(":checked")?($(t).show(),$(t).rules("add","required"),i&&$(t).closest(".row").show()):($(t).hide(),$(t).rules("remove","required"),$(t).removeClass("input-validation-error"),$(t+"-error").remove(),i&&$(t).closest(".row").hide())}$(document).ready(function(){$.validator.setDefaults({ignore:[]});$("#saveTBAnnualVaccine").removeData("validator");$("#saveTBAnnualVaccine").removeData("unobtrusiveValidation");$.validator.unobtrusive.parse($("#saveTBAnnualVaccine"));$("#saveTBAnnualVaccine").validate();toggleField("#PPDReactionFlg","#PPDReactionMeasurementId",!0);toggleField("#QuestionnaireCompleteFlg","#QuestionnaireCompleteDate");toggleField("#BMATFlg","#BMATDate");$("#PPDReactionFlg").on("change",function(){toggleField("#PPDReactionFlg","#PPDReactionMeasurementId",!0)});$("#QuestionnaireCompleteFlg").on("change",function(){toggleField("#QuestionnaireCompleteFlg","#QuestionnaireCompleteDate")});$("#BMATFlg").on("change",function(){toggleField("#BMATFlg","#BMATDate")});$(this).parent().focus();$(".isDate").datepicker({onSelect:function(){$(this).valid();$("#saveVaccine").focus()}})});$("#saveVaccine").on("click",function(n){n.preventDefault();inProgress("PPDSection")?($("#VaccineDate").rules("add","required"),$("#PPDSiteId").rules("add","required")):($("#VaccineDate").rules("remove","required"),$("#VaccineDate").removeClass("input-validation-error"),$("#VaccineDate-error").remove(),$("#PPDSiteId").rules("remove","required"),$("#PPDSiteId").removeClass("input-validation-error"),$("#PPDSiteId-error").remove());var t=$("#saveTBAnnualVaccine");t.valid()&&t.ajaxSubmit({success:function(n){n.success?($("#modal").dialog("close"),updateTable()):alert("Error: Vaccine not found in database")},error:function(){alert("Server is not responding. Please reload page and try again")}})});