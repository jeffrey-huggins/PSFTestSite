@model AtriumWebApp.Models.ViewModel.ContractCommunityViewModel
<tr>
    <td>
        @Html.HiddenFor(m => m.CommunityId, new { data_field = "CommunityId" })
        @Html.HiddenFor(m => m.ContractInfoId, new { data_field = "ContractInfoId" })
        @Html.DropDownListFor(m => m.CommunityId, new SelectList(Model.Communities, "CommunityId", "CommunityShortName", null), new { data_field = "SelectedCommunity", @class = "SelectedCommunity" })
    </td>
    <td>
        @Html.TextBoxFor(x => x.StartDate, "{0:MM/dd/yyyy}", new { size = "10", data_field = "StartDate", @class = "isDate" })
    </td>
    <td>
        @Html.TextBoxFor(x => x.EndDate, "{0:MM/dd/yyyy}", new { size = "10", data_field = "EndDate", @class = "isDate" })
    </td>
    <td>
        @Html.HiddenFor(m => m.ContractRenewalId, new { data_field = "ContractRenewalId" })
        @Html.DropDownListFor(m => m.ContractRenewalId, new SelectList(Model.Renewals, "Id", "Name", null), new { name = "SelectedRenewal", data_field = "SelectedRenewal" })
    </td>
    <td>
        @Html.HiddenFor(m => m.ContractTerminationNoticeId, new { data_field = "ContractTerminationNoticeId" })
        @Html.DropDownListFor(m => m.ContractTerminationNoticeId, new SelectList(Model.TerminationNotices, "Id", "Name", null), new { name = "SelectedTerminationNotice", data_field = "SelectedTerminationNotice" })
    </td>
    <td>
        @Html.HiddenFor(m => m.ContractPaymentTermId, new { data_field = "ContractPaymentTermId" })
        @Html.DropDownListFor(m => m.ContractPaymentTermId, new SelectList(Model.PaymentTerms, "Id", "Name", null), new { name = "SelectedPaymentTerm", data_field = "SelectedPaymentTerm" })
    </td>
    <td>
        @Html.TextBoxFor(x => x.CredentialingDate, "{0:MM/dd/yyyy}", new { size = "10", data_field = "CredentialingDate", @class = "isDate" })
    </td>
    <td>
        @Html.TextBoxFor(x => x.ReCredentialingDate, "{0:MM/dd/yyyy}", new { size = "10", data_field = "ReCredentialingDate", @class = "isDate" })
    </td>
    <td>@Html.CheckBoxFor(m => m.ArchiveFlg, new { data_field = "ArchiveFlg" })</td>
    <td>
        <button type="button" class="delete-item">&times;</button>
    </td>
</tr>

<script type="text/javascript">
    $(document).ready(function () {
        if ($('input[type=checkbox][id^=ContractCommunities_][id$=__ArchiveFlg]').length > 0) {
            var allCommunitiesChecked = true;
            $('input[type=checkbox][id^=ContractCommunities_][id$=__ArchiveFlg]').each(function (i, elem) {
                if ($(elem).prop('checked') == false) {
                    allCommunitiesChecked = false;
                    return false;
                }
            });
            $('input#AllArchiveFlg').prop('checked', allCommunitiesChecked);
        }
    });
</script>