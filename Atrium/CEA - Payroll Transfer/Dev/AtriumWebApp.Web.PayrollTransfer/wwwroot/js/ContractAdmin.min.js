function LookupAdminTable(n){this.editing=null;this.dataTable=$(n).dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"100px",sDom:"frtS",iDisplayLength:-1,aoColumns:[{sWidth:"160px"},{bSearchable:!1,bSortable:!1,sWidth:"20px"},{bSearchable:!1,bSortable:!1,sWidth:"20px"}],oLanguage:{sEmptyTable:"No Records"}});this.restoreRow=function(n){for(var i=this.dataTable.fnGetData(n),r=$(">td",n),t=0,u=r.length;t<u;t++)this.dataTable.fnUpdate(i[t],n,t,!1)};this.editRow=function(n){var i=this.dataTable.fnGetData(n),t=$(">td",n);t[0].innerHTML='<input type="text" size="30" maxlength="30" value="'+i[0]+'"/>';t[1].innerHTML='<a class="edit" href="">Save<\/a> <a class="cancel" href="">Cancel<\/a>'};this.saveRow=function(n,t,i){var r=this,u=$("input",n);$.ajax({url:i,dataType:"json",cache:!1,type:"POST",data:{id:t,name:u[0].value},success:function(t){t.Success&&(r.dataTable.fnUpdate(u[0].value,n,0,!1),r.dataTable.fnUpdate('<a class="edit" href="">Edit<\/a>',n,1,!1))},error:function(){alert("Server is not responding. Please reload page and try again")}})};this.deleteRow=function(n,t,i){var r=this;$.ajax({url:i,dataType:"json",cache:!1,type:"POST",data:{id:t},success:function(t){t.Success?r.dataTable.fnDeleteRow(n):alert("Error: Event not found in database")},error:function(){alert("Server is not responding. Please reload page and try again")}})}}function AdvancedLookupAdminTable(n){this.editing=null;this.dataTable=$(n).dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"100px",sDom:"frtS",iDisplayLength:-1,aoColumns:[{sWidth:"250px"},{sWidth:"10px"},{sWidth:"10px"},{sWidth:"10px"},{bSearchable:!1,bSortable:!1,sWidth:"15px"},{bSearchable:!1,bSortable:!1,sWidth:"15px"}],oLanguage:{sEmptyTable:"No Records"}});this.restoreRow=function(n){for(var i=this.dataTable.fnGetData(n),r=$(">td",n),t=0,u=r.length;t<u;t++)this.dataTable.fnUpdate(i[t],n,t,!1)};this.editRow=function(n){var i=this.dataTable.fnGetData(n),r=$(".IsDataEntry",n).is(":checked"),u=$(".IsReportable",n).is(":checked"),t=$(">td",n);t[0].innerHTML='<input type="text" size="8" maxlength="16" value="'+i[0]+'"/>';t[1].innerHTML='<input type="text" size="2" maxlength="2" value="'+i[1]+'"/>';t[2].innerHTML=r?'<input name="IsDataEntry" class="IsDataEntry" type="checkbox" value="true" checked />':'<input name="IsDataEntry" class="IsDataEntry" type="checkbox" value="true" />';t[3].innerHTML=u?'<input name="IsReportable" class="IsReportable" type="checkbox" value="true" checked />':'<input name="IsReportable" class="IsReportable" type="checkbox" value="true" />';t[4].innerHTML='<a class="edit" href="">Save<\/a> <a class="cancel" href="">Cancel<\/a>'};this.saveRow=function(n,t,i){var u=this,r=$("input",n),f=$(".IsDataEntry",n),e=$(".IsReportable",n);$.ajax({url:i,dataType:"json",cache:!1,type:"POST",data:{id:t,name:r[0].value,isDataEntry:$(f).is(":checked"),isReportable:$(e).is(":checked"),sortOrder:r[1].value},success:function(t){t.Success&&($(f).attr("disabled","disabled"),$(e).attr("disabled","disabled"),u.dataTable.fnUpdate(r[0].value,n,0,!1),u.dataTable.fnUpdate(r[1].value,n,1,!1),u.dataTable.fnUpdate('<a class="edit" href="">Edit<\/a>',n,4,!1))},error:function(){alert("Server is not responding. Please reload page and try again")}})};this.deleteRow=function(n,t,i){var r=this;$.ajax({url:i,dataType:"json",cache:!1,type:"POST",data:{id:t},success:function(t){t.Success?r.dataTable.fnDeleteRow(n):alert("Error: Event not found in database")},error:function(){alert("Server is not responding. Please reload page and try again")}})}}function PreparePage(){ContractManagementAdmin.setupLookupAdminTable("#addressTypesTable",path+"ContractAdmin/EditAddressType",path+"ContractAdmin/DeleteAddressType");ContractManagementAdmin.setupLookupAdminTable("#contactTypesTable",path+"ContractAdmin/EditContactType",path+"ContractAdmin/DeleteContactType");ContractManagementAdmin.setupLookupAdminTable("#categoriesTable",path+"ContractAdmin/EditCategory",path+"ContractAdmin/DeleteCategory");var n=ContractManagementAdmin.setupLookupAdminTable("#subCategoryTable",path+"ContractAdmin/EditSubCategory",path+"ContractAdmin/DeleteSubCategory");ContractManagementAdmin.setupAdvancedLookupAdminTable("#paymentTermTable",path+"ContractAdmin/EditPaymentTerm",path+"ContractAdmin/DeletePaymentTerm");ContractManagementAdmin.setupAdvancedLookupAdminTable("#renewalTypesTable",path+"ContractAdmin/EditRenewalType",path+"ContractAdmin/DeleteRenewalType");ContractManagementAdmin.setupAdvancedLookupAdminTable("#terminationNoticeTable",path+"ContractAdmin/EditTerminationNotice",path+"ContractAdmin/DeleteTerminationNotice");$("#submitSubCategory").click(function(t){var u=$(this),r,i;t.preventDefault();r=$("#SelectedCategoryId").val();i=$("#newSubCategoryType").val();$.ajax({url:path+"ContractAdmin/CreateSubCategory",dataType:"json",cache:!1,type:"POST",data:{newType:i,SelectedCategoryId:r},success:function(t){var r=[i,'<a class="edit" href="">Edit<\/a>','<a class="delete" href="">Delete<\/a>'],u=n.dataTable.fnAddData(r,!0),f=n.dataTable.fnSettings().aoData[u[0]].nTr;f.setAttribute("id",t.NewSubCategory.Id);$("#newSubCategoryType").val("")},error:function(){alert("Could not communicate with the server.")}})});$("#Categories").on("change",function(t){t.preventDefault();var i=$(this).add("option:selected").val();$("#SelectedCategoryId").val(i);$.ajax({url:path+"ContractAdmin/GetSubCategories",type:"POST",data:{selectedCategoryId:i},datatype:"json",success:function(t){var i;for(n.dataTable.fnClearTable(!0),i=0;i<t.length;i++){var r=t[i].Id,u=t[i].Name,f=n.dataTable.fnAddData([u,'<a class="edit" href="">Edit<\/a>','<a class="delete" href="">Delete<\/a>'],!1),e=n.dataTable.fnSettings().aoData[f[0]].nTr;e.setAttribute("id",r)}n.dataTable.fnDraw()},error:function(){alert("Could not communicate with the server.")}})})}var ContractManagementAdmin=function(){function n(n,t){$(n.dataTable).on("click","a.edit",function(i){var r,u;i.preventDefault();r=$(this).parents("tr")[0];n.editing!==null&&n.editing!=r?(n.restoreRow(nEditing),n.editRow(r),n.editing=r):n.editing==r&&this.innerHTML=="Save"?(u=$(this).closest("tr").attr("id"),n.saveRow(n.editing,u,t),n.editing=null):(n.editRow(r),n.editing=r)})}function t(n,t){$("a.delete",n.dataTable).on("click",function(i){var r,u,f;i.preventDefault();r=confirm("Are you sure you want to delete?");r==!0&&(u=$(this).parents("tr")[0],f=$(this).closest("tr").attr("id"),n.deleteRow(u,f,t))})}function i(n){$(n.dataTable).on("click","a.cancel",function(t){t.preventDefault();var i=$(this).parents("tr")[0];n.restoreRow(i);n.editing=null})}return{setupLookupAdminTable:function(r,u,f){var e=new LookupAdminTable(r);return n(e,u),t(e,f),i(e),e},setupAdvancedLookupAdminTable:function(r,u,f){var e=new AdvancedLookupAdminTable(r);n(e,u);t(e,f);i(e)}}}();