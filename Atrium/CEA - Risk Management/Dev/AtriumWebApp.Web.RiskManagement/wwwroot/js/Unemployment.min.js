function setupNotesSection(){var n=$("#ClaimId").val();$("#note").load(path+"RMUnemployment/CreateOrEditNote?claimId="+n,setupNoteForm);$("#noteList").load(path+"RMUnemployment/NotesList?claimId="+n,setupNoteList)}function setupNoteForm(){$("#noteSubmit").on("click",function(n){n.preventDefault();var t=$("#noteForm");t.valid()&&t.ajaxSubmit({success:function(n){n.success&&setupNotesSection()}})});$("#noteClear").on("click",function(n){n.preventDefault();var t=$("#ClaimId").val();$("#note").load(path+"RMUnemployment/CreateOrEditNote?claimId="+t,setupNoteForm)})}function setupNoteList(){$("#noteTable").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"200px",sDom:"rtS",iDisplayLength:-1,oLanguage:{sEmptyTable:"No notes for this claim"}});$("#noteTable").on("click",".edit",function(n){n.preventDefault();$("#note").load(this.href,setupNoteForm)});$("#noteTable").on("click",".delete",function(n){n.preventDefault();$.ajax({url:this.href,success:function(n){n.success&&setupNotesSection()}})})}function setupPaymentSection(){var n=$("#ClaimId").val();$("#payment").load(path+"RMUnemployment/CreateOrEditPayment?claimId="+n,setupPaymentForm);$("#paymentList").load(path+"RMUnemployment/PaymentList?claimId="+n,setupPaymentList)}function setupPaymentForm(){var n=$("#BenefitKey").val();n=="-1"&&$("#BenefitDate").val("");(n=="-1"||n=="-2")&&$("#BenefitAmt").val("");$("#submitPayment").on("click",function(n){n.preventDefault();var t=$("#payoutForm");t.valid()&&t.ajaxSubmit({success:function(n){n.success&&setupPaymentSection()}})});$("#clearPayment").on("click",function(){setupPaymentSection()});$(".isDate").datepicker()}function setupPaymentList(){$("#payoutTable").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"200px",sDom:"rtS",iDisplayLength:-1,oLanguage:{sEmptyTable:"No payments for this claim"}});$("#payoutTable").on("click",".edit",function(n){n.preventDefault();$("#payment").load(this.href,setupPaymentForm)});$("#payoutTable").on("click",".delete",function(n){n.preventDefault();$.ajax({url:this.href,success:function(n){n.success?setupPaymentSection():alert(n.data)}})})}function setupForm(){var n=$("#ClaimId").val();n==""?($("#ClaimReceivedDate").val(""),$("#ApplicationDate").val(""),$("#MaxClaimAmt").val("")):(setupPaymentSection(),setupNotesSection());$("#PreventableComments").toggle($("#PreventableFlg").is(":checked"));$("#PreventableFlg").on("change",function(){$("#PreventableComments").toggle($("#PreventableFlg").is(":checked"))});$(".isDate").datepicker();$("#saveClaim").on("click",function(n){n.preventDefault();var t=$("#claimForm");t.valid()&&t.ajaxSubmit({success:function(n){n.success&&loadForms()}})});$("#newClaim").on("click",function(n){n.preventDefault();loadForms()})}function loadForms(){var n=$("#Residents").val(),t=path+"RMUnemployment/EmployeeInfo?employeeId="+n;$("#payment").html("Edit a claim to add payments or notes.");$("#paymentList").html("");$("#note").html("");$("#noteList").html("");$("#selectedEmployeeView").load(t,function(){$("#title").text("Unemployment Claim for "+$("#residentName").text())});$("#editForm").load(path+"RMUnemployment/CreateOrEditClaim?employeeId="+n,setupForm);$("#claimsList").load(path+"RMUnemployment/ClaimList?employeeId="+n,function(){$("#claimTable").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"200px",sDom:"rtS",iDisplayLength:-1,oLanguage:{sEmptyTable:"No claims for this employee"}});$("#claimTable").on("click",".edit",function(n){n.preventDefault();$("#editForm").load(this.href,setupForm)});$("#claimTable").on("click",".delete",function(n){n.preventDefault();$.ajax({url:this.href,success:function(n){n.success&&loadForms()}})})})}function initSidebar(){$("#listing").html("");$("#title").text("Unemployment Claim");$(".instruction").show();$("#editForm").html("");$("#claimsList").html("");$("#Residents").val("")}$("#sideBar").on("change","#Residents",function(){$("#Residents").val()!=""&&$("#Residents").val()!="0"?($(".instruction").hide(),loadForms()):($(".instruction").show(),$("#listing").html(""))});$("#sideBar").on("change","#ShowTerminatedEmployees",function(){$("#SideDDL").ajaxSubmit({url:path+"RMUnemployment/UpdateEmployeeSideBar",type:"POST",success:function(n){$("#sideBar").html(n);initSidebar()}})});$("#sideBar").on("click","#lookbackUpdate",function(n){n.preventDefault();$("#Residents").val("");var t=moment($("#LookbackDate").val(),"MM/DD/YYYY",!0);t.isValid()||(t=moment($("#LookbackDate").val(),"M/DD/YYYY",!0));t.isValid()?moment().diff(t)<0?alert("Error: You can not have a Termination date that is in the future"):(ShowProgress(),$("#SideDDL").ajaxSubmit({url:path+"RMUnemployment/UpdateEmployeeSideBar",type:"POST",success:function(n){$("#sideBar").html(n);initSidebar()}})):alert("Error: Please enter a valid Termination Date (mm/dd/yyyy)")});$("#sideBar").on("change","#Communities",function(){$("#SideDDL").ajaxSubmit({url:path+"RMUnemployment/UpdateEmployeeSideBar",type:"POST",success:function(n){$("#sideBar").html(n);initSidebar()}})});