function editRow(n){n.addClass("editing");var i=n.closest("table").dataTable(),r=i.fnGetData(n[0]),t=n.find("td");t[0].innerHTML='<input type="text" size="30" maxlength="30" value="'+r[0]+'"/>';t[1].innerHTML='<a class="editAreaRoom" href="#">Save<\/a> <a class="cancelAreaRoom" href="#">Cancel<\/a>'}function restoreRow(n){var i,r,t;for(n.removeClass("editing"),i=n.closest("table").dataTable(),r=i.fnGetData(n[0]),t=0;t<r.length;t++)i.fnUpdate(r[t],n[0],t,!1)}function saveRow(n){var r=n.attr("id"),t=n.find("input").val(),i=n.closest("table").dataTable();$.ajax({url:path+"/ScheduleAdmin/EditAreaRoom",dataType:"json",cache:!1,type:"POST",data:{id:r,name:t},success:function(r){r.Success==!0&&(i.fnUpdate(t,n[0],0,!1),i.fnUpdate('<a class="editAreaRoom" href="">Edit<\/a>',n[0],1,!1),n.removeClass("editing"))},error:function(){alert("Server is not responding. Please reload page and try again")}})}$(document).ready(function(){$("#addAreaRoom").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();var t=$("#NewRoomArea").val();$.ajax({url:path+"/ScheduleAdmin/AddRoomArea",dataType:"json",cache:!1,type:"POST",data:{newRoomArea:t},success:function(n){n.Success==!0?($("#RoomArea").dataTable().fnAddData([t,'<a class="editAreaRoom" href="">Edit<\/a>','<a class="deleteAreaRoom" href="">Delete<\/a>'],!0),$("td:contains('"+t+"')").closest("tr").prop("id",n.id),$("#RoomArea").dataTable().fnDraw(),$("#NewRoomArea").val(""),alert("Successfully added new Hall/Unit.")):alert("Please ensure the New Hall/Unit is valid.")},error:function(){alert("Could not communicate with the server.")}})});$("#closeRoomArea").click(function(){$(".ui-dialog-content").dialog("close")});var n=$("#RoomArea").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"150px",sDom:"frtS",aoColumns:[{bSearchable:!1,bSortable:!0,sWidth:"85px"},{bSearchable:!1,bSortable:!1,sWidth:"20px"},{bSearchable:!1,bSortable:!1,sWidth:"20px"}],oLanguage:{sEmptyTable:"No Halls/Units for this community."}});$("#RoomArea").on("click","a.editAreaRoom",function(n){var t,i;n.preventDefault();t=$(this).closest("tr");$("#RoomArea .editing").length>0&&!t.hasClass("editing")?(i=$("#RoomArea .editing"),restoreRow(i),editRow(t)):t.hasClass("editing")&&this.innerHTML=="Save"?saveRow(t):editRow(t)});$("#RoomArea").on("click","a.deleteAreaRoom",function(n){n.preventDefault();var t=$(this).closest("tr"),i=t.attr("id"),r=t.closest("table").dataTable(),u=confirm("Are you sure you want to delete?");u==!0&&$.ajax({url:path+"ScheduleAdmin/DeleteAreaRoom",dataType:"json",cache:!1,type:"POST",data:{id:i},success:function(n){n.Success==!0?r.fnDeleteRow(t[0]):n.Msg!=null&&n.Msg!=undefined?alert("Delete Unsuccessful: "+n.Msg):alert("Error: Event not found in database")},error:function(){alert("Server is not responding. Please reload page and try again")}})});$("#RoomArea").on("click","a.cancelAreaRoom",function(){var n=$("#RoomArea .editing");restoreRow(n)})});