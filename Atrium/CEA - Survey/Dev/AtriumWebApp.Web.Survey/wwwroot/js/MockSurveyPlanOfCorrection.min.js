function PreparePage(n){var t=$("#formContent"),i;$("#MockSurveyId").length!==1&&t.hide();i=$("#MockSurveys").dataTable({bAutoWidth:!1,bSmart:!1,sScrollY:"400px",sDom:"rtS",iDisplayLength:-1,aaSorting:[[0,"desc"]],aoColumns:[null,null,null,null,{sWidth:"50px",bSearchable:!1,bSortable:!1}],oLanguage:{sEmptyTable:"No current closed Mock Surveys for Community"}});i.on("click","a.edit-link",function(n){n.preventDefault();ShowProgress();$.ajax({url:this.href,success:function(n){t.html(n);t.show();SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload page and try again")},complete:function(){HideProgress()}})});t.on("click","#Save",function(r){var u=$("#PlanOfCorrections"),f=u.serialize();r.preventDefault();ShowProgress();$.ajax({type:u.attr("method"),url:u.attr("action"),data:f,success:function(r){var s,e,o,h;r.Success?(s=$("#MockSurveyId",u).val(),e=$("#"+s),e.length>0&&(o=i.fnGetData(e.get(0)),h=[o[0],o[1],o[2],r.FormattedClosedDate,f.IsClosed?"":'<a class="edit-link" href="'+n+"/PlanCorrections/"+s+'">Plan Corrections<\/a>'],i.fnUpdate(h,e[0])),t.hide()):t.html(r);SetCountDownTime(1800)},error:function(){alert("Server is not responding. Please reload page and try again")},complete:function(){HideProgress()}})});$("#CurrentCommunity").change(function(){var n=$("#CurrentCommunity").val();n!=""&&$("#CommunitySelectionForm").submit()});$(".isDate").datepicker();$("#ToDateRangeInvalid").val()=="1"&&alert('Error: Please enter a valid date in the Date Range "To" Field (mm/dd/yyyy)');$("#FromDateRangeInvalid").val()=="1"&&alert('Error: Please enter a valid date in the Date Range "From" Field (mm/dd/yyyy)');$("#ToDateRangeInFuture").val()=="1"&&alert('Error: Please enter a valid date that is not in the future in the Date Range "To" Field');$("#FromDateRangeInFuture").val()=="1"&&alert('Error: Please enter a valid date that is not in the future in the Date Range "From" Field');$("#FromAfterTo").val()=="1"&&alert('Error: You can not have the "From" Date after the "To" Date in the Date Range Fields')}