function alreadyExist(n,t,i){var u,r,f;for(i||(i=0),u=t.dataTable().fnGetData(),r=0;r<u.length;r++)if(f=u[r][i],f.toLowerCase()===n.toLowerCase())return!0;return!1}function createCheckboxString(n,t,i,r){var u,f;return r&&(u="checked"),f='<input class="'+t+'" id="'+n+'" name="'+i+'" type="checkbox" value="'+r+'" '+u+">",f+('<input name="'+i+'" type="hidden" value="'+r+'">')}$(document).ready(function(){function i(i){var r=n.fnGetData(i);n.fnUpdate(r[0],i,0,!1);n.fnUpdate(r[1],i,1,!1);n.fnUpdate('<a class="edit" href="">Edit<\/a> <a class="delete" href="">Delete<\/a>',i,3,!1);t=null}function r(i){var u=n.fnGetData(i),r=$(">td",i);r[0].innerHTML='<textarea rows="5" cols="40" maxlength="512">'+u[0].replace(/<br>/g,"\n")+"<\/textarea>";r[1].innerHTML='<input type="text" size="1" maxlength="3" value="'+u[1]+'"/>';r[3].innerHTML='<a class="edit" href="">Save<\/a> <a class="cancel" href="">Cancel<\/a>';t=i}function u(i,r){var u=$("textarea, input",i);$.ajax({url:path+"SkilledChartingAdmin/SaveDocumentationQueue",dataType:"json",cache:!1,type:"POST",data:{DocumentationQueueId:r,DocumentationQueueName:u[0].value,SortOrder:u[1].value},success:function(){n.fnUpdate(u[0].value.replace(/\n/g,"<br>"),i,0,!1);n.fnUpdate(u[1].value,i,1,!1);n.fnUpdate('<a class="edit" href="">Edit<\/a> <a class="delete" href="">Delete<\/a>',i,3,!1);n.fnSort([[1,"asc"],[4,"asc"]]);t=null},error:function(){alert("Server is not responding. Please reload page and try again")}})}var n=$("#DocumentationQueues").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"475px",sDom:"frtS",iDisplayLength:-1,aoColumns:[{sWidth:"370px"},{sWidth:"100px"},{sWidth:"130px"},{sWidth:"125px"},{bVisible:!1}],oLanguage:{sEmptyTable:"No Documentation Queues"}}),t;n.fnSort([[1,"asc"],[4,"asc"]]);t=null;$("#DocumentationQueues").on("click","a.delete",function(t){t.preventDefault();var i=$(this).parents("tr")[0],r=$(this).closest("tr").attr("id"),u=confirm("Are you sure you want to delete?");u&&$.ajax({url:path+"SkilledChartingAdmin/DeleteDocumentationQueue",cache:!1,type:"POST",data:{docQueueId:r},success:function(){n.fnDeleteRow(i)},error:function(){alert("Documentation Queue has failed to be deleted. Please try again and if you see this message repeatedly the server may be down.")}})});$("#DocumentationQueues").on("click","a.edit",function(n){n.preventDefault();var f=$(this).parents("tr")[0];t!==null&&t!=f?(i(t),r(f)):t==f&&this.innerHTML=="Save"?u(t,$(this).closest("tr").attr("id")):r(f)});$("#DocumentationQueues").on("click","a.cancel",function(n){n.preventDefault();i($(this).parents("tr")[0])});$(".EnableDisable").click(function(){var t=$(this),n=$(this).is(":checked"),i=$(this).closest("tr").attr("id");$.ajax({url:path+"SkilledChartingAdmin/UpdateDocumentationQueueDataEntryFlag",cache:!1,type:"POST",data:{docQueueId:i,dataEntryFlag:n},success:function(){},error:function(){t.attr("checked",!n);alert("Documentation Queue has failed to be enabled/disabled. Please try again and if you see this message repeatedly the server may be down.")}})});$("form").on("click","#AddDocQueue",function(n){var t,r,i;if(n.preventDefault(),t=$("#newDocQueueForm"),t.validate(),r=$("#DocumentationQueueName").val(),$("#GuidelineId").val(),i=$("#DocumentationQueues").dataTable(),alreadyExist(r,i))return alert("Documentation Queue already exists"),!1;if(!t.valid())return!1;$.ajax({url:t.attr("action"),dataType:"json",type:"POST",data:t.serialize(),success:function(n){if(n.Success){var r=n.data.DocumentationQueueName,u=n.data.SortOrder,f=n.data.DataEntryFlg,e=n.data.DocumentationQueueId,o=i.fnAddData([r,u,createCheckboxString("EnableDisable","EnableDisable","EnableDisable",f),'<a class="edit" href="">Edit<\/a><a class="delete" href="">Delete<\/a>',""]),s=i.fnSettings().aoData[o[0]].nTr;s.setAttribute("id",e);t[0].reset()}else alert(n.message)},error:function(){alert("Server is not responding. Please reload page and try again")}})})});$(document).ajaxSend(function(){ShowProgress()});$(document).ajaxComplete(function(){HideProgress()});