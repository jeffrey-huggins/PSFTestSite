function alreadyExist(n,t,i){var u,r,f;for(i||(i=0),u=t.dataTable().fnGetData(),r=0;r<u.length;r++)if(f=u[r][i],f.toLowerCase()===n.toLowerCase())return!0;return!1}function createCheckboxString(n,t,i,r){var u,f;return r&&(u="checked"),f='<input class="'+t+'" id="'+n+'" name="'+i+'" type="checkbox" value="'+r+'" '+u+">",f+('<input name="'+i+'" type="hidden" value="'+r+'">')}$(document).ready(function(){function r(i){var r=n.fnGetData(i);n.fnUpdate(r[0],i,0,!1);n.fnUpdate(r[1],i,1,!1);n.fnUpdate('<a class="edit" href="">Edit<\/a> <a class="delete" href="">Delete<\/a>',i,4,!1);t=null}function u(i){var u=n.fnGetData(i),r=$(">td",i);r[0].innerHTML='<input type="text" size="50" maxlength="256" value="'+u[0]+'"/>';r[1].innerHTML='<input type="text" size="1" maxlength="3" value="'+u[1]+'"/>';r[4].innerHTML='<a class="edit" href="">Save<\/a> <a class="cancel" href="">Cancel<\/a>';t=i}function f(i,r){var u=$("input",i);$.ajax({url:path+"SkilledChartingAdmin/SaveGuideline",dataType:"json",cache:!1,type:"POST",data:{GuidelineId:r,GuidelineName:u[0].value,SortOrder:u[1].value},success:function(){n.fnUpdate(u[0].value,i,0,!1);n.fnUpdate(u[1].value,i,1,!1);n.fnUpdate('<a class="edit" href="">Edit<\/a> <a class="delete" href="">Delete<\/a>',i,4,!1);n.fnSort([[1,"asc"],[0,"asc"]]);t=null},error:function(){alert("Server is not responding. Please reload page and try again")}})}var n,t,e;$("#tabs").tabs();$("#tabs").tabs({activate:function(n,t){var r=t.newPanel.find(".dataTable").filter(function(){return this.id!=""}),u;for(i=0;i<r.length;i++)u=$("#"+r[i].id).dataTable(),u.fnAdjustColumnSizing()}});$("#guidelineTab").on("click","#AddDocGuideline",function(n){n.preventDefault();var t=$("#guidelineTab form"),r=$("#GuidelineName").val(),i=$("#Guidelines").dataTable();if(alreadyExist(r,i))return alert("Guideline already exists"),!1;if(!t.valid())return!1;$.ajax({url:t.attr("action"),dataType:"json",type:"POST",data:t.serialize(),success:function(n){if(n.Success){var u=n.data.GuidelineName,f=n.data.SortOrder,e=n.data.DataEntryFlg,r=n.data.GuidelineId,o=i.fnAddData([u,f,createCheckboxString("EnableDisable","EnableDisable","EnableDisable",e),'<a class="queues" href="'+path+"SkilledChartingAdmin/DocumentationQueues?guidelineId="+r+'">Queues<\/a>','<a class="edit" href="">Edit<\/a><a class="delete" href="">Delete<\/a>',]),s=i.fnSettings().aoData[o[0]].nTr;s.setAttribute("id",r);t[0].reset()}else alert(n.message)},error:function(){alert("Server is not responding. Please reload page and try again")}})});n=$("#Guidelines").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"400px",sDom:"frtS",iDisplayLength:-1,aoColumns:[{sWidth:"350px"},{sWidth:"100px"},{sWidth:"130px"},null,{sWidth:"125px"}],oLanguage:{sEmptyTable:"No Guidelines"}});$("#Guidelines").on("click","a.queues",function(n){n.preventDefault();var t=this.href;$("#queueModal").load(t,function(){$("#queueModal").dialog({width:750,modal:!0,resizable:!1})})});n.fnSort([[1,"asc"],[0,"asc"]]);t=null;$("#Guidelines").on("click","a.delete",function(t){t.preventDefault();var i=$(this).parents("tr")[0],r=$(this).closest("tr").attr("id"),u=confirm("Are you sure you want to delete?");u&&$.ajax({url:path+"SkilledChartingAdmin/DeleteGuideline",cache:!1,type:"POST",data:{guidelineId:r},success:function(){n.fnDeleteRow(i)},error:function(){alert("Guideline has failed to be deleted. Please try again and if you see this message repeatedly the server may be down.")}})});$("#Guidelines").on("click","a.edit",function(n){n.preventDefault();var i=$(this).parents("tr")[0];t!==null&&t!=i?(r(t),u(i)):t==i&&this.innerHTML=="Save"?f(t,$(this).closest("tr").attr("id")):u(i)});$("#Guidelines").on("click","a.cancel",function(n){n.preventDefault();r($(this).parents("tr")[0])});$(".EnableDisable").click(function(){var t=$(this),n=$(this).is(":checked"),i=$(this).closest("tr").attr("id");$.ajax({url:path+"SkilledChartingAdmin/UpdateGuidelineDataEntryFlag",cache:!1,type:"POST",data:{guidelineId:i,dataEntryFlag:n},success:function(){},error:function(){t.attr("checked",!n);alert("Guideline has failed to be enabled/disabled. Please try again and if you see this message repeatedly the server may be down.")}})});e=$("#CommunityTable").dataTable({bFilter:!1,bAutoWidth:!1,sScrollY:"600px",sDom:"frtS",iDisplayLength:-1,oLanguage:{sEmptyTable:"No Communities"}});$(".checkbox").click(function(){var t=$(this),n=$(this).is(":checked"),i=$(this).attr("id"),r=$(this).parents("tr").children(":first-child").text();$.ajax({url:path+"Base/ChangeDataFlgCom",dataType:"json",cache:!1,type:"POST",data:{community:i,dFlag:n,appCode:"SKC"},success:function(i){i.Success||(t.attr("checked",!n),alert("Community has failed to be enabled/disabled. Please try again and if you see this message repeatedly the server may be down."))}})});$("#SaveLookback").validate({rules:{LookbackDays:{required:!0,number:!0}}})});$(document).ajaxSend(function(){ShowProgress()});$(document).ajaxComplete(function(){HideProgress()});